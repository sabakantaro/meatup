(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[751],{2998:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chatrooms",function(){return t(6666)}])},2066:function(e,s,t){"use strict";var r=t(5893),n=t(7294),a=t(3634);s.Z=function(){var e=(0,n.useContext)(a.AuthContext).currentUser;return(0,r.jsxs)("footer",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-4 px-8 md:px-32 py-14 bg-slate-800 text-white",children:[(0,r.jsxs)("div",{className:"space-y-4 text-xs text-gray-300",children:[(0,r.jsx)("h5",{className:"font-bold",children:"ACCOUNT"}),(0,r.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/users/".concat(null==e?void 0:e.id,"/show"),children:"My Page"}),(0,r.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/events/create",children:"Become a Host"}),(0,r.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/notifications",children:"Notifications"}),(0,r.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/chatrooms",children:"Messages"}),(0,r.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/signout",children:"Logout"})]}),(0,r.jsxs)("div",{className:"space-y-4 text-xs text-gray-300",children:[(0,r.jsx)("h5",{className:"font-bold pt-3 md:pt-0",children:"DISCOVER"}),(0,r.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/search",children:"Search Events"}),(0,r.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/search",children:"Workout place"}),(0,r.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/search",children:"Sponsored Event"})]}),(0,r.jsxs)("div",{className:"space-y-4 text-xs text-gray-300",children:[(0,r.jsx)("h5",{className:"font-bold pt-3 md:pt-0",children:"MEATUP"}),(0,r.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/",children:"About Us"}),(0,r.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/",children:"Privacy & Policy"}),(0,r.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/",children:"Terms of Service"})]})]})}},1090:function(e,s,t){"use strict";t.d(s,{Z:function(){return f}});var r=t(828),n=t(5893),a=t(7294),c=t(1163),o=t(3520),i=t(286);t(1759),t(5138);var l=t(3634),u=t(2606),d=t(7106),h=function(e){var s=e.items,t=e.button;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.v,{as:"div",className:"relative inline-block text-left",children:[t,(0,n.jsx)(d.u,{as:a.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,n.jsx)(u.v.Items,{className:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,n.jsx)("div",{className:"py-1",children:s.map(function(e){return(0,n.jsx)(u.v.Item,{children:function(s){var t=s.active;return(0,n.jsx)("a",{href:e.href,className:function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter(Boolean).join(" ")}(t?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm"),children:e.name})}})})})})})]})})},m=t(6162),x=t(1613),f=function(e){var s=e.placeholder,t=(0,c.useRouter)(),d=t.query,f=d.location,g=d.date,p=(0,a.useContext)(l.AuthContext),v=p.currentUser,j=p.isSignedIn,N=(0,r.Z)((0,a.useState)(f||""),2),y=N[0],b=N[1],w=(0,r.Z)((0,a.useState)(!0),2),k=w[0],_=w[1],C=(0,r.Z)((0,a.useState)(!1),2),Z=C[0],S=C[1],E=(0,r.Z)((0,a.useState)(!1),2),M=E[0],P=E[1],T=(0,r.Z)((0,a.useState)(new Date(g)),2),U=T[0],A=T[1];(0,a.useEffect)(function(){A(new Date(g||new Date))},[t]),(0,a.useEffect)(function(){var e=function(){P(window.innerWidth<768)};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}},[]),(0,a.useEffect)(function(){var e=setTimeout(function(){_(!1)},800);return function(){return clearTimeout(e)}},[]);var D=(0,n.jsxs)("div",{className:"flex items-center border-2 rounded-full py-2 shadow-sm m-auto max-w-[400px] w-full mt-5 md:mt-0",children:[(0,n.jsx)("input",{value:y,onChange:function(e){b(e.target.value),S(!0)},className:"flex-grow pl-5 bg-transparent outline-none text-sm text-gray-600 placeholder-gray-400 w-full",type:"text",placeholder:s||"Start your search..."}),(0,n.jsx)(o,{className:"inline-flex h-8 w-9 bg-red-400 text-white rounded-full p-2 cursor-pointer mx-2",onClick:function(){return S(!0)}})]}),F=j?(0,n.jsx)(h,{items:[{name:"Profile",href:"/users/".concat(v&&v.id,"/show")},{name:"Create Event",href:"/events/create"},{name:"Notifications",href:"/notifications"},{name:"Messages",href:"/chatrooms"},{name:"Logout",href:"/signout"}],button:M?(0,n.jsx)(u.v.Button,{children:(0,n.jsx)(m,{className:"h-6"})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.v.Button,{className:"flex items-center space-x-2 border-2 p-2 rounded-full",children:[(0,n.jsx)(m,{className:"h-6"}),(0,n.jsx)(x,{className:"h-6"})]})})}):(0,n.jsx)("button",{className:"inline cursor-pointer",onClick:function(){return t.push("/signin")},children:"Sign In"});return k?(0,n.jsx)("header",{className:"top-0 z-50 bg-white shadow-mb p-5 px-10 border-b border-s-gray-500",children:(0,n.jsxs)("div",{className:"grid grid-cols-3 md:grid-cols-3",children:[M&&(0,n.jsx)("div",{className:"w-5"}),(0,n.jsx)("div",{className:"animate-pulse flex items-center justify-center md:justify-start h-10 cursor-pointer my-auto",children:(0,n.jsx)("div",{className:"bg-gray-300 h-4 w-16 rounded-full"})}),!M&&(0,n.jsx)("div",{className:"animate-pulse flex items-center md:border-2 rounded-full py-2 md:shadow-sm",children:(0,n.jsx)("div",{className:"bg-gray-300 h-4 w-40 rounded-full"})}),(0,n.jsxs)("div",{className:"flex items-center space-x-0 justify-end text-gray-500",children:[(0,n.jsx)("div",{className:"animate-pulse bg-gray-300 h-4 w-20 rounded-full"}),(0,n.jsx)("div",{className:"animate-pulse bg-gray-300 h-4 w-20 rounded-full"})]})]})}):(0,n.jsxs)("header",{className:"top-0 z-50 bg-white shadow-mb p-5 px-10 border-b border-s-gray-500",children:[(0,n.jsxs)("div",{className:"grid grid-cols-3 md:grid-cols-3",children:[M&&(0,n.jsx)("div",{className:"w-5"}),(0,n.jsx)("div",{onClick:function(){return t.push("/")},className:"relative flex item-center justify-center md:justify-start h-10 cursor-pointer my-auto",children:(0,n.jsx)("picture",{children:(0,n.jsx)("img",{src:"/meatup_title.png",alt:"Meatup Logo",className:"h-10 object-contain cursor-pointer"})})}),!M&&D,(0,n.jsxs)("div",{className:"flex items-center space-x-0 justify-end text-gray-500",children:[(0,n.jsx)("p",{className:"hidden md:inline cursor-pointer mr-5",onClick:function(){return t.push("/events/create")},children:"Become a host"}),F]})]}),M&&D,Z&&(0,n.jsxs)("div",{className:"flex flex-col col-span-3 mx-auto items-center",children:[(0,n.jsx)(i.f,{date:U,minDate:new Date,color:"#FD5B61",onChange:function(e){return A(e)},onPreviewChange:function(){return A(null)}}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("button",{className:"flex-grow text-gray-500",onClick:function(){return S(!1)},children:"Cancel"}),(0,n.jsx)("div",{className:"w-40"}),(0,n.jsx)("button",{className:"flex-grow text-red-400",onClick:function(){t.push({pathname:"/search",query:{location:y,date:U?U.toISOString():null}})},children:"Search"})]})]})]})}},3875:function(e,s,t){"use strict";var r=t(5893);t(7294),s.Z=function(e){var s=e.src,t=e.userName;return(0,r.jsx)("div",{className:"inline-block rounded-full overflow-hidden bg-red-400 w-12 h-12",children:s?(0,r.jsx)("img",{src:s,alt:"User Avatar",className:"object-cover w-12 h-12"}):(0,r.jsx)("div",{className:"flex items-center justify-center text-white text-xl font-bold uppercase w-12 h-12",children:(void 0===t?"user":t).charAt()})})}},6574:function(e,s,t){"use strict";t.d(s,{_:function(){return a},v:function(){return c}});var r=t(4480),n=t(1955),a=function(){return r.Z.get("chatrooms",{headers:{"access-token":n.Z.get("_access_token"),client:n.Z.get("_client"),uid:n.Z.get("_uid")}})},c=function(e){return r.Z.get("chatrooms/".concat(e),{headers:{"access-token":n.Z.get("_access_token"),client:n.Z.get("_client"),uid:n.Z.get("_uid")}})}},6666:function(e,s,t){"use strict";t.r(s);var r=t(7568),n=t(828),a=t(655),c=t(5893),o=t(7294),i=t(3875),l=t(6574),u=t(1163),d=t(1090),h=t(2066),m=t(9008),x=t.n(m);s.default=function(){var e=(0,n.Z)((0,o.useState)(!0),2),s=e[0],t=e[1],m=(0,n.Z)((0,o.useState)([]),2),f=m[0],g=m[1],p=(0,u.useRouter)(),v=(0,o.useCallback)((0,r.Z)(function(){var e;return(0,a.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,l._)()];case 1:return 200===(e=s.sent()).status&&g(e.data.chatrooms),[3,3];case 2:return console.log(s.sent()),[3,3];case 3:return t(!1),[2]}})}),[]);return(0,o.useEffect)(function(){v()},[v]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(x(),{children:[(0,c.jsx)("title",{children:"Meatup | Chatrooms Page"}),(0,c.jsx)("link",{rel:"icon",href:"/meatup_logo.png"})]}),(0,c.jsxs)("div",{className:"bg-gray-100",children:[(0,c.jsx)(d.Z,{}),s?null:f.length>0?(0,c.jsx)("div",{className:"gap-4 h-screen max-w-screen-md m-auto",children:f.map(function(e){var s,t,r;return(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-md cursor-pointer transition duration-300 hover:shadow-lg m-1",onClick:function(){return p.push("/chatrooms/".concat(e.chatroom.id))},children:(0,c.jsxs)("div",{className:"p-4 flex items-start",children:[(0,c.jsx)("div",{className:"mr-3",children:(0,c.jsx)(i.Z,{src:null===(s=e.otherUser)||void 0===s?void 0:s.image.url,userName:null===(t=e.otherUser)||void 0===t?void 0:t.name})}),(0,c.jsxs)("div",{className:"flex flex-col flex-grow",children:[(0,c.jsx)("h4",{className:"text-lg font-semibold",children:null===(r=e.otherUser)||void 0===r?void 0:r.name}),(0,c.jsx)("p",{className:"text-gray-500 line-clamp-3",children:null===e.lastMessage?"No messages":e.lastMessage.content.length>30?e.lastMessage.content.substr(0,30)+"...":e.lastMessage.content})]})]})},e.id)})}):(0,c.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[(0,c.jsx)("div",{children:(0,c.jsx)("img",{src:"/meatup_logo.png",alt:"empty",className:"object-contain h-10 grayscale"})}),(0,c.jsx)("p",{className:"text-gray-500 pt-3",children:"No chat for now."})]}),(0,c.jsx)(h.Z,{})]})]})}},9008:function(e,s,t){e.exports=t(2636)}},function(e){e.O(0,[439,774,888,179],function(){return e(e.s=2998)}),_N_E=e.O()}]);