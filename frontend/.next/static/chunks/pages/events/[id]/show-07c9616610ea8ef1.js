(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{1206:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events/[id]/show",function(){return s(4284)}])},6794:function(e,n,s){"use strict";var t=s(1799),l=s(9396),i=s(828),r=s(5893),a=s(7698),c=s(7294),d=s(3545);n.Z=function(e){var n=e.events,s=(0,i.Z)((0,c.useState)({}),2),o=s[0],u=s[1],m=n.map(function(e){return{longitude:e.place.longitude,latitude:e.place.latitude}}),x=a.getCenter(m),v=(0,i.Z)((0,c.useState)({longitude:x.longitude,latitude:x.latitude,zoom:11}),2),h=v[0],f=v[1];return(0,r.jsx)(d.ZP,(0,l.Z)((0,t.Z)({style:{width:"100%",height:"100%"}},h),{mapStyle:"mapbox://styles/ryosuke8291/clg8pdois001i01pgqj6xnd0z",mapboxAccessToken:"pk.eyJ1Ijoicnlvc3VrZTgyOTEiLCJhIjoiY2xnN2U1ZnF2MGo0YzNlcDhqYms2MmhpaCJ9.s9xjQmfrRuez9yuLp-C6tQ",onMove:function(e){return f(e.viewState)},children:n.map(function(e){return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.Jx,{longitude:e.place.longitude,latitude:e.place.latitude,offset:[-20,-10],children:(0,r.jsx)("p",{role:"img",onClick:function(){return u(e.place)},className:"cursor-pointer text-2xl animate-bounce","aria-label":"push-pin",children:"\uD83D\uDCCD"})}),o.longitude===e.place.longitude&&(0,r.jsx)(d.GI,{onClose:function(){return u(!1)},closeButton:!0,closeOnClick:!1,latitude:e.place.latitude,longitude:e.place.longitude,children:e.place.location})]},e.place.longitude)})}))}},1353:function(e,n,s){"use strict";s.d(n,{Z:function(){return m}});var t=s(5893),l=s(7294),i=s(381),r=s.n(i),a=s(4480),c=s(3634),d=s(1163),o=s(7171),u=s(8034),m=function(e){var n,s,i=e.event,m=(0,l.useContext)(c.AuthContext).currentUser,x=(0,d.useRouter)(),v=function(){var e;e={user_id:null==m?void 0:m.id,event_id:null==i?void 0:i.id},a.Z.post("/participants",e)&&x.push("/events/".concat(null==i?void 0:i.id,"/attendance"))},h=(null==i?void 0:null===(n=i.participants)||void 0===n?void 0:n.length)===0&&(null==i?void 0:null===(s=i.user)||void 0===s?void 0:s.id)!==(null==m?void 0:m.id);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"sticky bottom-0 bg-white w-full py-5 z-10 px-5 lg:px-20",children:(0,t.jsx)("div",{className:"md:max-w-screen mx-auto",children:(0,t.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,t.jsxs)("div",{className:"hidden sm:flex flex-col justify-center",children:[(0,t.jsx)("div",{className:"flex flex-col uppercase text-sm leading-5 tracking-tight lg:text-base",children:(0,t.jsx)("time",{children:(null==i?void 0:i.meetingDatetime)&&r()(new Date(null==i?void 0:i.meetingDatetime)).format("dddd, MMMM DD, YYYY HH:mm")})}),(0,t.jsx)("div",{children:(0,t.jsx)("p",{className:"font-semibold",children:null==i?void 0:i.title})})]}),(0,t.jsx)("div",{className:"w-full sm:w-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-around",children:[(0,t.jsx)("div",{className:"flex items-center md:block",children:(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("div",{className:"font-semibold",children:(0,t.jsx)("span",{children:"FREE"})})})}),(0,t.jsx)("div",{className:"flex items-center space-x-5 ml-5",children:(0,t.jsx)(o.Z,{item:i})}),(0,t.jsxs)("div",{className:"flex items-center space-x-5 ml-5",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("div",{children:(0,t.jsx)("button",{className:"py-3.5 px-4 border border-teal-700 rounded-lg leading-8 font-semibold transition-all fill-current text-teal-700 hover:bg-teal-700 hover:text-white",children:(0,t.jsx)("div",{className:"flex items-center flex-row-reverse",children:(0,t.jsx)(u.Z,{})})})})}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("button",{className:"py-2.5 px-8  rounded-lg border leading-8 text-white font-semibold whitespace-nowrap ".concat(h?"bg-red-400 border-red-400 hover:bg-red-300 hover:border-red-300":"bg-gray-400 border-gray-400"),onClick:function(){return v()},disabled:!h,children:"Join"})})]})]})})]})})})})}},3875:function(e,n,s){"use strict";var t=s(5893);s(7294),n.Z=function(e){var n=e.src,s=e.userName;return(0,t.jsx)("div",{className:"inline-block rounded-full overflow-hidden bg-red-400 w-12 h-12",children:n?(0,t.jsx)("img",{src:n,alt:"User Avatar",className:"object-cover w-12 h-12"}):(0,t.jsx)("div",{className:"flex items-center justify-center text-white text-xl font-bold uppercase w-12 h-12",children:(void 0===s?"user":s).charAt()})})}},2451:function(e,n,s){"use strict";s.d(n,{EY:function(){return l},yM:function(){return i}});var t=s(4480),l=function(e){return t.Z.get("/events/".concat(e))},i=function(e){return t.Z.post("/events",e)}},4284:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return y}});var t=s(7568),l=s(828),i=s(655),r=s(5893),a=s(7294),c=s(1163),d=s(3634),o=s(2451),u=s(1090),m=s(381),x=s.n(m),v=s(6794),h=s(3875),f=function(e){var n,s=e.user;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[(0,r.jsx)("p",{className:"pr-4",children:(0,r.jsx)(h.Z,{src:null==s?void 0:null===(n=s.image)||void 0===n?void 0:n.url,alt:"User Avatar",userName:null==s?void 0:s.name})}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("h4",{className:"text-sm font-medium leading-5",children:null==s?void 0:s.name}),(0,r.jsx)("p",{className:"flex flex-row text-gray-600 text-sm mt-1 h-5 overflow-ellipsis overflow-hidden",children:(null==s?void 0:s.profile)?null==s?void 0:s.profile:"Hi there! I'm "+(null==s?void 0:s.name)+"."})]})]})})},p=function(e){var n,s=e.event;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"bg-white lg:rounded-2xl p-4 mb-4",children:(0,r.jsx)(f,{user:null==s?void 0:s.user})}),(0,r.jsxs)("div",{className:"bg-white lg:rounded-2xl",children:[(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",strokeWidth:1.5,stroke:"gray",className:"w-8 h-6 mr-2",children:(0,r.jsx)("path",{d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("p",{className:"text-base text-gray-700",children:(null==s?void 0:s.meetingDatetime)&&x()(new Date(null==s?void 0:s.meetingDatetime)).format("dddd, MMMM DD, YYYY HH:mm")})]})}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",strokeWidth:1.5,stroke:"gray",className:"w-8 h-6 mr-2",children:[(0,r.jsx)("path",{d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),(0,r.jsx)("p",{className:"text-base text-gray-700",children:null==s?void 0:null===(n=s.place)||void 0===n?void 0:n.location})]})}),(0,r.jsx)("div",{style:{width:"100%",height:240},children:(0,r.jsx)(v.Z,{events:[s]})})]})]})},j=function(e){var n=e.title,s=e.hostName,t=(0,l.Z)((0,a.useState)(!1),2),i=t[0],c=t[1];return(0,a.useEffect)(function(){var e=function(){window.scrollY>230?c(!0):window.scrollY<160&&c(!1)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}},[]),(0,r.jsx)("div",{className:"".concat(i?"sticky top-0 bg-white py-2":"py-2 lg:py-6"," transition-transform duration-500 z-50 px-5 w-full border-b-[2px] bg-white"),children:(0,r.jsx)("div",{className:"container mx-auto px-4 max-w-6xl",children:(0,r.jsxs)("div",{className:"md:max-w-screen mx-auto",children:[(0,r.jsx)("h1",{className:"".concat(i?"text-lg":"text-3xl"," overflow-ellipsis overflow-hidden font-bold leading-snug"),children:n}),!i&&(0,r.jsxs)("p",{className:"text-gray-500 text-sm mt-1",children:["Hosted by ",s]})]})})})},g=s(1353),N=s(2066),w=s(4480),b=function(e){var n=e.onClose,s=e.children,t=(0,a.useRef)(null),i=(0,l.Z)((0,a.useState)(!0),2),c=i[0],d=i[1],o=function(){d(!1),n()},u=function(e){t.current&&!t.current.contains(e.target)&&o()};return((0,a.useEffect)(function(){return document.addEventListener("mousedown",u),function(){document.removeEventListener("mousedown",u)}},[]),c)?(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg z-50",ref:t,children:(0,r.jsx)("div",{children:s})})}):null},C=function(e){var n,s,t=e.comment;e.handleDeleteComment;var i=(0,l.Z)(a.useState(!1),2),c=i[0],d=i[1],o=new Date,u=new Date(null==t?void 0:t.createdAt),m=new Intl.RelativeTimeFormat("en",{numeric:"auto"}).format(-Math.floor((o-u)/864e5),"day");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"relative py-5",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsx)(h.Z,{userName:null==t?void 0:null===(n=t.user)||void 0===n?void 0:n.name})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"bg-white px-4 pt-4 pb-5 ml-2 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("div",{children:(0,r.jsx)("a",{className:"text-xs sm:text-sm text-titleColor font-semibold hover:no-underline cursor-pointer",children:null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.name})}),(0,r.jsx)("div",{className:"cursor-pointer",children:(0,r.jsx)("div",{className:"relative inline-block",children:(0,r.jsx)("button",{className:"flex flex-row items-center space-x-2",onClick:function(){return d(!0)},children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:(0,r.jsx)("path",{d:"M6 12C6 13.1046 5.10457 14 4 14C2.89543 14 2 13.1046 2 12C2 10.8954 2.89543 10 4 10C5.10457 10 6 10.8954 6 12ZM14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12ZM20 14C21.1046 14 22 13.1046 22 12C22 10.8954 21.1046 10 20 10C18.8954 10 18 10.8954 18 12C18 13.1046 18.8954 14 20 14Z"})})})})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"mt-2.5 text-xs sm:text-sm text-titleColor font-normal",children:null==t?void 0:t.content})})]}),(0,r.jsx)("div",{className:"flex justify-end px-3 pt-1 items-center",children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{className:"pl-2",children:(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray6 pr-1",children:m})})})})]})]})}),(0,r.jsx)("div",{className:"pl-12 sm:pl-15"}),c&&(0,r.jsx)(b,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"hover:text-gray-500 cursor-pointer p-1",onClick:function(){console.log("Reported"),d(!1)},children:"Report"}),(0,r.jsx)("div",{className:"hover:text-gray-500 cursor-pointer p-1",onClick:function(){d(!1)},children:"Delete"})]}),onClose:function(){return d(!1)}})]})},y=function(){var e,n,s,m,x,v=(0,a.useContext)(d.AuthContext).currentUser,f=(0,l.Z)((0,a.useState)(null),2),b=f[0],y=f[1],Z=(0,l.Z)((0,a.useState)(!1),2),k=Z[0],D=Z[1],M=(0,l.Z)((0,a.useState)([]),2),_=M[0],E=M[1],Y=(0,l.Z)((0,a.useState)(""),2),S=Y[0],z=Y[1],L=(0,c.useRouter)(),F=L.query.id;(0,a.useEffect)(function(){var e,n,s=new Image;s.src=null==b?void 0:null===(e=b.place)||void 0===e?void 0:null===(n=e.image)||void 0===n?void 0:n.url,s.onload=function(){D(!0)}},[b]);var I=(0,a.useCallback)((0,t.Z)(function(){var e;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,o.EY)(F)];case 1:return(null==(e=n.sent())?void 0:e.status)===200?(y(null==e?void 0:e.data.event),E(null==e?void 0:e.data.comments),console.log(null==e?void 0:e.data.comments)):console.log("No event"),[3,3];case 2:return console.log(n.sent()),[3,3];case 3:return[2]}})}),[F,L]);(0,a.useEffect)(function(){I()},[I]);var A=(0,a.useCallback)((0,t.Z)(function(){var e;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e={userId:null==v?void 0:v.id,eventId:F,content:S},[4,w.Z.post("/events/".concat(F,"/comments"),e)];case 1:return n.sent(),z(""),I(),[3,3];case 2:return console.log(n.sent()),[3,3];case 3:return[2]}})}),[v,F,S]),R=(0,a.useCallback)((e=(0,t.Z)(function(e){return(0,i.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,w.Z.delete("/events/".concat(F,"/comments/").concat(e))];case 1:return n.sent(),z(""),[3,3];case 2:return console.log(n.sent()),[3,3];case 3:return[2]}})}),function(n){return e.apply(this,arguments)}),[F]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{}),(0,r.jsx)(j,{title:null==b?void 0:b.title,hostName:null==b?void 0:null===(n=b.user)||void 0===n?void 0:n.name}),(0,r.jsx)("div",{className:"bg-gray-100 min-h-screen overflow-auto",children:(0,r.jsx)("div",{className:"container mx-auto md:px-4 max-w-6xl",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3",children:[(0,r.jsx)("div",{className:"md:hidden inline p-4 mt-4",children:b&&(0,r.jsx)(p,{event:b})}),(0,r.jsxs)("div",{className:"md:p-4 lg:pr-16 col-span-2",children:[k?(0,r.jsx)("img",{className:"h-64 md:h-96 w-full object-cover md:pt-4",src:null==b?void 0:null===(s=b.place)||void 0===s?void 0:s.image.url,alt:"event image"}):(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 rounded-lg h-64 md:h-96 w-full object-cover md:pt-4"}),(0,r.jsxs)("div",{className:"px-6 sm:px-4 xl:px-0 md:max-w-screen w-full mt-5",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-5",children:"Description"}),(0,r.jsx)("p",{className:"whitespace-pre-wrap",children:null==b?void 0:b.description})]}),(0,r.jsxs)("div",{className:"px-6 sm:px-4 xl:px-0 md:max-w-screen w-full mt-5",children:[(0,r.jsx)("div",{className:"flex justify-between",children:(0,r.jsx)("h2",{className:"font-semibold text-xl mb-5","data-testid":"CommentsTitle",children:"Comments"})}),_.map(function(e){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(C,{comment:e,handleDeleteComment:function(){return R(e.id)}},e.id)})}),(0,r.jsx)("div",{className:"pl-12 sm:pl-15",children:(0,r.jsx)("div",{className:"w-full relative mb-8",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"hidden md:block",children:v&&(0,r.jsx)(h.Z,{userName:null==v?void 0:v.name})}),(0,r.jsx)("div",{className:"flex flex-col flex-1 ml-4 sm:ml-5",children:(0,r.jsx)("textarea",{rows:1,id:"commentInput",name:"commentInput",className:"p-4 sm:p-5 w-full overflow-hidden break-words border border-gray5 rounded text-gray7 focus:border-teal-600 focus:outline-none",placeholder:"Add a comment...",value:S,onChange:function(e){return z(e.target.value)}})}),(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)("button",{className:"ml-4 sm:ml-5 mr-2.5",disabled:""===S,onClick:A,children:(0,r.jsx)("svg",{fill:""!==S?"outlined":"none",strokeWidth:1.8,stroke:""!==S?"":"currentColor",className:"w-6 h-6 ".concat(""!==S?" fill-teal-600":""),children:(0,r.jsx)("path",{d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})})]})})})]}),(0,r.jsxs)("div",{className:"flex flex-row p-6 bg-white lg:rounded-2xl cursor-pointer w-100 items-center my-20",onClick:function(){return L.push("/search")},children:[(0,r.jsx)("img",{alt:"Photo of the event place",src:null==b?void 0:null===(m=b.place)||void 0===m?void 0:m.image.url,className:"bg-transparent rounded-md object-cover h-16 w-16"}),(0,r.jsxs)("div",{className:"ml-5",children:[(0,r.jsx)("div",{children:null==b?void 0:null===(x=b.place)||void 0===x?void 0:x.location}),(0,r.jsx)("div",{className:"text-teal-700 hover:no-underline",children:"See more events"})]}),(0,r.jsx)("div",{className:"ml-auto",children:(0,r.jsx)("svg",{width:"24",height:"24",children:(0,r.jsx)("path",{d:"M9.46967 21.5303C9.17678 21.2374 9.17678 20.7626 9.46967 20.4697L17.7626 12.1768C17.8602 12.0791 17.8602 11.9209 17.7626 11.8232L9.46967 3.53033C9.17678 3.23744 9.17678 2.76256 9.46967 2.46967C9.76256 2.17678 10.2374 2.17678 10.5303 2.46967L18.8232 10.7626C19.5066 11.446 19.5066 12.554 18.8232 13.2374L10.5303 21.5303C10.2374 21.8232 9.76256 21.8232 9.46967 21.5303Z"})})})]})]}),(0,r.jsx)("div",{className:"hidden md:block p-4 mt-4",children:b&&(0,r.jsx)(p,{event:b})})]})})}),(0,r.jsx)(g.Z,{event:b}),(0,r.jsx)(N.Z,{})]})}}},function(e){e.O(0,[885,439,786,206,774,888,179],function(){return e(e.s=1206)}),_N_E=e.O()}]);