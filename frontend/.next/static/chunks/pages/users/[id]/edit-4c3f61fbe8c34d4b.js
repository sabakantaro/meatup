(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[110],{968:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/[id]/edit",function(){return t(9042)}])},2066:function(e,r,t){"use strict";var s=t(5893),n=t(7294),a=t(3634);r.Z=function(){var e=(0,n.useContext)(a.AuthContext).currentUser;return(0,s.jsxs)("footer",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-4 px-8 md:px-32 py-14 bg-slate-800 text-white",children:[(0,s.jsxs)("div",{className:"space-y-4 text-xs text-gray-300",children:[(0,s.jsx)("h5",{className:"font-bold",children:"ACCOUNT"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/users/".concat(null==e?void 0:e.id,"/show"),children:"My Page"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/events/create",children:"Become a Host"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/notifications",children:"Notifications"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/chatrooms",children:"Messages"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/signout",children:"Logout"})]}),(0,s.jsxs)("div",{className:"space-y-4 text-xs text-gray-300",children:[(0,s.jsx)("h5",{className:"font-bold pt-3 md:pt-0",children:"DISCOVER"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/search",children:"Search Events"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/search",children:"Workout place"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/search",children:"Sponsored Event"})]}),(0,s.jsxs)("div",{className:"space-y-4 text-xs text-gray-300",children:[(0,s.jsx)("h5",{className:"font-bold pt-3 md:pt-0",children:"MEATUP"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/",children:"About Us"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/",children:"Privacy & Policy"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/",children:"Terms of Service"})]})]})}},1090:function(e,r,t){"use strict";t.d(r,{Z:function(){return f}});var s=t(828),n=t(5893),a=t(7294),o=t(1163),l=t(3520),i=t(286);t(1759),t(5138);var c=t(3634),u=t(2606),d=t(7106),h=function(e){var r=e.items,t=e.button;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.v,{as:"div",className:"relative inline-block text-left",children:[t,(0,n.jsx)(d.u,{as:a.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,n.jsx)(u.v.Items,{className:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,n.jsx)("div",{className:"py-1",children:r.map(function(e){return(0,n.jsx)(u.v.Item,{children:function(r){var t=r.active;return(0,n.jsx)("a",{href:e.href,className:function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter(Boolean).join(" ")}(t?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm"),children:e.name})}})})})})})]})})},x=t(6162),m=t(1613),f=function(e){var r=e.placeholder,t=(0,o.useRouter)(),d=t.query,f=d.location,p=d.date,v=(0,a.useContext)(c.AuthContext),g=v.currentUser,j=v.isSignedIn,b=(0,s.Z)((0,a.useState)(f||""),2),y=b[0],N=b[1],w=(0,s.Z)((0,a.useState)(!0),2),C=w[0],k=w[1],S=(0,s.Z)((0,a.useState)(!1),2),_=S[0],Z=S[1],E=(0,s.Z)((0,a.useState)(!1),2),D=E[0],P=E[1],T=(0,s.Z)((0,a.useState)(new Date(p)),2),U=T[0],A=T[1];(0,a.useEffect)(function(){A(new Date(p||new Date))},[t]),(0,a.useEffect)(function(){var e=function(){P(window.innerWidth<768)};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}},[]),(0,a.useEffect)(function(){var e=setTimeout(function(){k(!1)},800);return function(){return clearTimeout(e)}},[]);var F=(0,n.jsxs)("div",{className:"flex items-center border-2 rounded-full py-2 shadow-sm m-auto max-w-[400px] w-full mt-5 md:mt-0",children:[(0,n.jsx)("input",{value:y,onChange:function(e){N(e.target.value),Z(!0)},className:"flex-grow pl-5 bg-transparent outline-none text-sm text-gray-600 placeholder-gray-400 w-full",type:"text",placeholder:r||"Start your search..."}),(0,n.jsx)(l,{className:"inline-flex h-8 w-9 bg-red-400 text-white rounded-full p-2 cursor-pointer mx-2",onClick:function(){return Z(!0)}})]}),M=j?(0,n.jsx)(h,{items:[{name:"Profile",href:"/users/".concat(g&&g.id,"/show")},{name:"Create Event",href:"/events/create"},{name:"Notifications",href:"/notifications"},{name:"Messages",href:"/chatrooms"},{name:"Logout",href:"/signout"}],button:D?(0,n.jsx)(u.v.Button,{children:(0,n.jsx)(x,{className:"h-6"})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.v.Button,{className:"flex items-center space-x-2 border-2 p-2 rounded-full",children:[(0,n.jsx)(x,{className:"h-6"}),(0,n.jsx)(m,{className:"h-6"})]})})}):(0,n.jsx)("button",{className:"inline cursor-pointer",onClick:function(){return t.push("/signin")},children:"Sign In"});return C?(0,n.jsx)("header",{className:"top-0 z-50 bg-white shadow-mb p-5 px-10 border-b border-s-gray-500",children:(0,n.jsxs)("div",{className:"grid grid-cols-3 md:grid-cols-3",children:[D&&(0,n.jsx)("div",{className:"w-5"}),(0,n.jsx)("div",{className:"animate-pulse flex items-center justify-center md:justify-start h-10 cursor-pointer my-auto",children:(0,n.jsx)("div",{className:"bg-gray-300 h-4 w-16 rounded-full"})}),!D&&(0,n.jsx)("div",{className:"animate-pulse flex items-center md:border-2 rounded-full py-2 md:shadow-sm",children:(0,n.jsx)("div",{className:"bg-gray-300 h-4 w-40 rounded-full"})}),(0,n.jsxs)("div",{className:"flex items-center space-x-0 justify-end text-gray-500",children:[(0,n.jsx)("div",{className:"animate-pulse bg-gray-300 h-4 w-20 rounded-full"}),(0,n.jsx)("div",{className:"animate-pulse bg-gray-300 h-4 w-20 rounded-full"})]})]})}):(0,n.jsxs)("header",{className:"top-0 z-50 bg-white shadow-mb p-5 px-10 border-b border-s-gray-500",children:[(0,n.jsxs)("div",{className:"grid grid-cols-3 md:grid-cols-3",children:[D&&(0,n.jsx)("div",{className:"w-5"}),(0,n.jsx)("div",{onClick:function(){return t.push("/")},className:"relative flex item-center justify-center md:justify-start h-10 cursor-pointer my-auto",children:(0,n.jsx)("picture",{children:(0,n.jsx)("img",{src:"/meatup_title.png",alt:"Meatup Logo",className:"h-10 object-contain cursor-pointer"})})}),!D&&F,(0,n.jsxs)("div",{className:"flex items-center space-x-0 justify-end text-gray-500",children:[(0,n.jsx)("p",{className:"hidden md:inline cursor-pointer mr-5",onClick:function(){return t.push("/events/create")},children:"Become a host"}),M]})]}),D&&F,_&&(0,n.jsxs)("div",{className:"flex flex-col col-span-3 mx-auto items-center",children:[(0,n.jsx)(i.f,{date:U,minDate:new Date,color:"#FD5B61",onChange:function(e){return A(e)},onPreviewChange:function(){return A(null)}}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("button",{className:"flex-grow text-gray-500",onClick:function(){return Z(!1)},children:"Cancel"}),(0,n.jsx)("div",{className:"w-40"}),(0,n.jsx)("button",{className:"flex-grow text-red-400",onClick:function(){t.push({pathname:"/search",query:{location:y,date:U?U.toISOString():null}})},children:"Search"})]})]})]})}},2395:function(e,r,t){"use strict";var s=t(5893);t(7294),r.Z=function(e){var r=e.src,t=e.userName;return(0,s.jsx)("div",{className:"inline-block rounded-full overflow-hidden bg-red-400 w-32 h-32",children:r?(0,s.jsx)("img",{src:r,alt:"User Avatar",className:"object-cover w-32 h-32"}):(0,s.jsx)("div",{className:"flex items-center justify-center text-white text-xl font-bold uppercase w-32 h-32",children:(void 0===t?"user":t).charAt()})})}},9042:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return g},default:function(){return j}});var s=t(7568),n=t(828),a=t(655),o=t(5893),l=t(2066),i=t(1090),c=t(7294),u=t(2395),d=t(3634),h=t(1163),x=t(4480),m=t(381),f=t.n(m),p=t(9008),v=t.n(p),g=!0,j=function(e){var r,t,m,p,g,j,b,y,N,w,C,k,S=e.result,_=(0,c.useContext)(d.AuthContext).currentUser,Z=(0,h.useRouter)(),E=Z.query.id,D=(0,n.Z)((0,c.useState)(null==S?void 0:null===(t=S.user)||void 0===t?void 0:t.name),2),P=D[0],T=D[1],U=(0,n.Z)((0,c.useState)(null==S?void 0:null===(m=S.user)||void 0===m?void 0:m.profile),2),A=U[0],F=U[1],M=(0,n.Z)((0,c.useState)(null==S?void 0:null===(p=S.user)||void 0===p?void 0:null===(g=p.image)||void 0===g?void 0:g.url),2),B=M[0],L=M[1],Y=(0,n.Z)((0,c.useState)(null==S?void 0:null===(j=S.user)||void 0===j?void 0:null===(b=j.image)||void 0===b?void 0:b.url),2),z=Y[0],I=Y[1],O=(0,n.Z)((0,c.useState)((null==S?void 0:null===(y=S.user)||void 0===y?void 0:y.birth_date)&&f()(null==S?void 0:null===(N=S.user)||void 0===N?void 0:N.birth_date).format("YYYY-MM-DD")),2),R=O[0],q=O[1],W=(0,n.Z)((0,c.useState)(null==S?void 0:null===(w=S.user)||void 0===w?void 0:w.gender),2),X=W[0],G=W[1];console.log(R);var H=(0,c.useCallback)(function(e){L(e.target.files[0])},[]),V=(0,c.useCallback)(function(e){var r=e.target.files[0];I(URL.createObjectURL(r))},[]),J=function(){var e,r,t=new FormData;return t.append("user[name]",P),t.append("user[profile]",A),t.append("user[birth_date]",R),t.append("user[gender]",X),B!==(null==S?void 0:null===(e=S.user)||void 0===e?void 0:null===(r=e.image)||void 0===r?void 0:r.url)&&t.append("user[image]",B),t},K=(r=(0,s.Z)(function(e){var r,t;return(0,a.__generator)(this,function(s){switch(s.label){case 0:e.preventDefault(),r=J(),s.label=1;case 1:var n;return s.trys.push([1,3,,4]),[4,(n=r,x.Z.patch("/users/".concat(E),n))];case 2:return t=s.sent(),(null==_?void 0:_.id)==E&&t&&setTimeout(function(){Z.push("/users/".concat(E,"/show"))},500),[3,4];case 3:return console.log(s.sent()),[3,4];case 4:return[2]}})}),function(e){return r.apply(this,arguments)});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(v(),{children:[(0,o.jsxs)("title",{children:[(null==S?void 0:null===(C=S.user)||void 0===C?void 0:C.name)||"User"," | Meatup"]}),(0,o.jsx)("link",{rel:"icon",href:"/meatup_logo.png"})]}),(0,o.jsx)(i.Z,{}),(0,o.jsx)("div",{className:"w-full max-w-screen-sm mx-auto px-4 md:px-8 my-6",children:(0,o.jsxs)("main",{className:"flex flex-col space-y-3 items-start flex-grow lg:px-15",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Edit profile"}),(0,o.jsxs)("div",{className:"flex flex-col md:flex-row space-x-0 md:space-x-6 space-y-3 md:space-y-0 items-center w-full",children:[(0,o.jsx)("div",{className:"relative flex flex-col",children:(0,o.jsx)(u.Z,{userName:null==S?void 0:null===(k=S.user)||void 0===k?void 0:k.name,src:z||"",size:32})}),(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsxs)("label",{htmlFor:"icon-button-file",className:"cursor-pointer",children:[(0,o.jsx)("input",{accept:"image/*",id:"icon-button-file",type:"file",className:"hidden",onChange:function(e){H(e),V(e)}}),(0,o.jsx)("p",{className:"w-100 whitespace-nowrap rounded-lg border p-3 text-gray-500 hover:text-gray-400 hover:border-gray-400",children:"Choose from library"})]})})]}),(0,o.jsx)("h4",{className:"text-xl font-bold",children:"Name"}),(0,o.jsx)("input",{type:"text",id:"name",placeholder:"Your name",name:"name",className:"w-full py-2 px-3 text-base rounded border outline-none placeholder:text-gray6 hover:border-gray6 focus:border-viridian pr-7 border-gray5",value:P,onChange:function(e){return T(e.target.value)}}),(0,o.jsx)("h4",{className:"text-xl font-bold",children:"Profile"}),(0,o.jsx)("textarea",{rows:4,id:"profile",placeholder:"Your profile",name:"profile",className:"w-full py-2 px-3 text-base rounded border outline-none placeholder:text-gray6 hover:border-gray6 focus:border-viridian pr-7 border-gray5",value:A,onChange:function(e){return F(e.target.value)}}),(0,o.jsx)("h4",{className:"text-xl font-bold",children:"Birth date"}),(0,o.jsx)("input",{type:"date",id:"birthDate",placeholder:"Your birth date",name:"birthDate",className:"w-full py-2 px-3 text-base rounded border outline-none placeholder:text-gray6 hover:border-gray6 focus:border-viridian pr-7 border-gray5",value:R,onChange:function(e){return q(e.target.value)}}),(0,o.jsx)("h4",{className:"text-xl font-bold",children:"Gender"}),(0,o.jsxs)("select",{id:"gender",name:"gender",className:"w-full py-2 px-3 text-base rounded border outline-none placeholder:text-gray6 hover:border-gray6 focus:border-viridian pr-7 border-gray5",value:X,onChange:function(e){return G(e.target.value)},children:[(0,o.jsx)("option",{value:"male",children:"male"}),(0,o.jsx)("option",{value:"female",children:"female"}),(0,o.jsx)("option",{value:"other",children:"other"})]}),(0,o.jsx)("button",{className:"text-white bg-red-500 rounded-lg p-4 cursor-pointer",onClick:K,children:"Save Changes"})]})}),(0,o.jsx)(l.Z,{})]})}},9008:function(e,r,t){e.exports=t(2636)}},function(e){e.O(0,[885,439,774,888,179],function(){return e(e.s=968)}),_N_E=e.O()}]);