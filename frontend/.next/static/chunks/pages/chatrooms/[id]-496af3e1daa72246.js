(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479],{3439:function(e,t,r){let s=r(7294),n=s.forwardRef(function({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))});e.exports=n},9852:function(e,t,r){let s=r(7294),n=s.forwardRef(function({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 010 1.06l-6.22 6.22H21a.75.75 0 010 1.5H4.81l6.22 6.22a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z",clipRule:"evenodd"}))});e.exports=n},419:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chatrooms/[id]",function(){return r(186)}])},2066:function(e,t,r){"use strict";var s=r(5893),n=r(7294),a=r(3634);t.Z=function(){var e=(0,n.useContext)(a.AuthContext).currentUser;return(0,s.jsxs)("footer",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-4 px-8 md:px-32 py-14 bg-slate-800 text-white",children:[(0,s.jsxs)("div",{className:"space-y-4 text-xs text-gray-300",children:[(0,s.jsx)("h5",{className:"font-bold",children:"ACCOUNT"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/users/".concat(null==e?void 0:e.id,"/show"),children:"My Page"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/events/create",children:"Become a Host"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/notifications",children:"Notifications"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/chatrooms",children:"Messages"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/signout",children:"Logout"})]}),(0,s.jsxs)("div",{className:"space-y-4 text-xs text-gray-300",children:[(0,s.jsx)("h5",{className:"font-bold pt-3 md:pt-0",children:"DISCOVER"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/search",children:"Search Events"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/search",children:"Workout place"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/search",children:"Sponsored Event"})]}),(0,s.jsxs)("div",{className:"space-y-4 text-xs text-gray-300",children:[(0,s.jsx)("h5",{className:"font-bold pt-3 md:pt-0",children:"MEATUP"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/",children:"About Us"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/",children:"Privacy & Policy"}),(0,s.jsx)("a",{className:"hover:text-gray-400 cursor-pointer block",href:"/",children:"Terms of Service"})]})]})}},1090:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var s=r(828),n=r(5893),a=r(7294),c=r(1163),o=r(3520),i=r(286);r(1759),r(5138);var l=r(3634),u=r(2606),d=r(7106),m=function(e){var t=e.items,r=e.button;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.v,{as:"div",className:"relative inline-block text-left",children:[r,(0,n.jsx)(d.u,{as:a.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,n.jsx)(u.v.Items,{className:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,n.jsx)("div",{className:"py-1",children:t.map(function(e){return(0,n.jsx)(u.v.Item,{children:function(t){var r=t.active;return(0,n.jsx)("a",{href:e.href,className:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}(r?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm"),children:e.name})}})})})})})]})})},h=r(6162),x=r(1613),f=function(e){var t=e.placeholder,r=(0,c.useRouter)(),d=r.query,f=d.location,g=d.date,v=(0,a.useContext)(l.AuthContext),p=v.currentUser,j=v.isSignedIn,N=(0,s.Z)((0,a.useState)(f||""),2),y=N[0],b=N[1],w=(0,s.Z)((0,a.useState)(!0),2),k=w[0],C=w[1],Z=(0,s.Z)((0,a.useState)(!1),2),_=Z[0],E=Z[1],S=(0,s.Z)((0,a.useState)(!1),2),A=S[0],I=S[1],T=(0,s.Z)((0,a.useState)(new Date(g)),2),L=T[0],U=T[1];(0,a.useEffect)(function(){U(new Date(g||new Date))},[r]),(0,a.useEffect)(function(){var e=function(){I(window.innerWidth<768)};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}},[]),(0,a.useEffect)(function(){var e=setTimeout(function(){C(!1)},800);return function(){return clearTimeout(e)}},[]);var B=(0,n.jsxs)("div",{className:"flex items-center border-2 rounded-full py-2 shadow-sm m-auto max-w-[400px] w-full mt-5 md:mt-0",children:[(0,n.jsx)("input",{value:y,onChange:function(e){b(e.target.value),E(!0)},className:"flex-grow pl-5 bg-transparent outline-none text-sm text-gray-600 placeholder-gray-400 w-full",type:"text",placeholder:t||"Start your search..."}),(0,n.jsx)(o,{className:"inline-flex h-8 w-9 bg-red-400 text-white rounded-full p-2 cursor-pointer mx-2",onClick:function(){return E(!0)}})]}),D=j?(0,n.jsx)(m,{items:[{name:"Profile",href:"/users/".concat(p&&p.id,"/show")},{name:"Create Event",href:"/events/create"},{name:"Notifications",href:"/notifications"},{name:"Messages",href:"/chatrooms"},{name:"Logout",href:"/signout"}],button:A?(0,n.jsx)(u.v.Button,{children:(0,n.jsx)(h,{className:"h-6"})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.v.Button,{className:"flex items-center space-x-2 border-2 p-2 rounded-full",children:[(0,n.jsx)(h,{className:"h-6"}),(0,n.jsx)(x,{className:"h-6"})]})})}):(0,n.jsx)("button",{className:"inline cursor-pointer",onClick:function(){return r.push("/signin")},children:"Sign In"});return k?(0,n.jsx)("header",{className:"top-0 z-50 bg-white shadow-mb p-5 px-10 border-b border-s-gray-500",children:(0,n.jsxs)("div",{className:"grid grid-cols-3 md:grid-cols-3",children:[A&&(0,n.jsx)("div",{className:"w-5"}),(0,n.jsx)("div",{className:"animate-pulse flex items-center justify-center md:justify-start h-10 cursor-pointer my-auto",children:(0,n.jsx)("div",{className:"bg-gray-300 h-4 w-16 rounded-full"})}),!A&&(0,n.jsx)("div",{className:"animate-pulse flex items-center md:border-2 rounded-full py-2 md:shadow-sm",children:(0,n.jsx)("div",{className:"bg-gray-300 h-4 w-40 rounded-full"})}),(0,n.jsxs)("div",{className:"flex items-center space-x-0 justify-end text-gray-500",children:[(0,n.jsx)("div",{className:"animate-pulse bg-gray-300 h-4 w-20 rounded-full"}),(0,n.jsx)("div",{className:"animate-pulse bg-gray-300 h-4 w-20 rounded-full"})]})]})}):(0,n.jsxs)("header",{className:"top-0 z-50 bg-white shadow-mb p-5 px-10 border-b border-s-gray-500",children:[(0,n.jsxs)("div",{className:"grid grid-cols-3 md:grid-cols-3",children:[A&&(0,n.jsx)("div",{className:"w-5"}),(0,n.jsx)("div",{onClick:function(){return r.push("/")},className:"relative flex item-center justify-center md:justify-start h-10 cursor-pointer my-auto",children:(0,n.jsx)("picture",{children:(0,n.jsx)("img",{src:"/meatup_title.png",alt:"Meatup Logo",className:"h-10 object-contain cursor-pointer"})})}),!A&&B,(0,n.jsxs)("div",{className:"flex items-center space-x-0 justify-end text-gray-500",children:[(0,n.jsx)("p",{className:"hidden md:inline cursor-pointer mr-5",onClick:function(){return r.push("/events/create")},children:"Become a host"}),D]})]}),A&&B,_&&(0,n.jsxs)("div",{className:"flex flex-col col-span-3 mx-auto items-center",children:[(0,n.jsx)(i.f,{date:L,minDate:new Date,color:"#FD5B61",onChange:function(e){return U(e)},onPreviewChange:function(){return U(null)}}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("button",{className:"flex-grow text-gray-500",onClick:function(){return E(!1)},children:"Cancel"}),(0,n.jsx)("div",{className:"w-40"}),(0,n.jsx)("button",{className:"flex-grow text-red-400",onClick:function(){r.push({pathname:"/search",query:{location:y,date:L?L.toISOString():null}})},children:"Search"})]})]})]})}},3875:function(e,t,r){"use strict";var s=r(5893);r(7294),t.Z=function(e){var t=e.src,r=e.userName;return(0,s.jsx)("div",{className:"inline-block rounded-full overflow-hidden bg-red-400 w-12 h-12",children:t?(0,s.jsx)("img",{src:t,alt:"User Avatar",className:"object-cover w-12 h-12"}):(0,s.jsx)("div",{className:"flex items-center justify-center text-white text-xl font-bold uppercase w-12 h-12",children:(void 0===r?"user":r).charAt()})})}},6574:function(e,t,r){"use strict";r.d(t,{_:function(){return a},v:function(){return c}});var s=r(4480),n=r(1955),a=function(){return s.Z.get("chatrooms",{headers:{"access-token":n.Z.get("_access_token"),client:n.Z.get("_client"),uid:n.Z.get("_uid")}})},c=function(e){return s.Z.get("chatrooms/".concat(e),{headers:{"access-token":n.Z.get("_access_token"),client:n.Z.get("_client"),uid:n.Z.get("_uid")}})}},186:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var s=r(7568),n=r(828),a=r(943),c=r(3375),o=r(1566),i=r(655),l=r(5893),u=r(7294),d=r(1163),m=r(3875),h=r(6574),x=r(4480),f=r(3634),g=r(3439),v=r(381),p=r.n(v),j=r(1090),N=r(2066),y=r(9852),b=r(9008),w=r.n(b),k=function(){var e,t=(0,u.useContext)(f.AuthContext).currentUser,r=(0,d.useRouter)(),v=r.query.id,b=(0,n.Z)((0,u.useState)(!0),2),k=b[0],C=b[1],Z=(0,n.Z)((0,u.useState)(),2),_=Z[0],E=Z[1],S=(0,n.Z)((0,u.useState)([]),2),A=S[0],I=S[1],T=(0,n.Z)((0,u.useState)(""),2),L=T[0],U=T[1],B=(0,u.useCallback)((0,s.Z)(function(){var e;return(0,i.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,h.v)(v)];case 1:return console.log(null==(e=t.sent())?void 0:e.data.otherUser),e&&(E(null==e?void 0:e.data.otherUser),I(null==e?void 0:e.data.messages)),[3,3];case 2:return console.log(t.sent()),[3,3];case 3:return C(!1),[2]}})}),[v]);(0,u.useEffect)(function(){B()},[B]);var D=(e=(0,s.Z)(function(e){var r,s;return(0,i.__generator)(this,function(n){var i;switch(n.label){case 0:e.preventDefault(),r={chatRoomId:Number(v),userId:null==t?void 0:t.id,content:L},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(i=r,x.Z.post("messages",i))];case 2:return(s=n.sent())&&(I(((function(e){if(Array.isArray(e))return(0,a.Z)(e)})(A)||(0,c.Z)(A)||(0,o.Z)(A)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([s.data.message])),U("")),[3,4];case 3:return console.log(n.sent()),[3,4];case 4:return[2]}})}),function(t){return e.apply(this,arguments)});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(w(),{children:[(0,l.jsxs)("title",{children:["Meatup | Chatroom - ",v]}),(0,l.jsx)("link",{rel:"icon",href:"/meatup_logo.png"})]}),(0,l.jsx)(j.Z,{}),k?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)("div",{className:"flex flex-col flex-grow bg-gray-100 max-w-screen-md m-auto shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between bg-white shadow-sm",children:[(0,l.jsx)("span",{onClick:function(){return r.back()},className:"cursor-pointer",children:(0,l.jsx)(y,{className:"h-6 w-6 m-2"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold m-4",children:null==_?void 0:_.name}),(0,l.jsx)("div",{className:"w-6 m-2"})]}),(0,l.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,l.jsx)("div",{className:"space-y-4",children:A.map(function(e,r){var s,n=e.userId===(null==t?void 0:t.id);return(0,l.jsxs)("div",{className:"flex ".concat(n?"flex justify-end":"flex justify-start"),children:[!n&&(0,l.jsx)("div",{className:"flex items-end justify-center pr-3",children:(0,l.jsx)(m.Z,{userName:null==_?void 0:_.name,src:(null==_?void 0:null===(s=_.image)||void 0===s?void 0:s.url)||""})}),(0,l.jsxs)("div",{children:[!n&&(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:null==_?void 0:_.name}),(0,l.jsx)("div",{className:"max-w-md py-3 px-5 rounded-lg shadow ".concat(n?"bg-red-400 text-white":"bg-gray-200"),children:(0,l.jsx)("p",{className:"text-base",children:e.content})})]}),(0,l.jsx)("div",{className:"flex items-end justify-center pl-2",children:(0,l.jsx)("p",{className:"text-xs mt-1 ".concat("text-gray-400"),children:p()(e.createdAt).format("h:mm a")})})]},r)})})}),(0,l.jsx)("div",{className:"container mx-auto mt-2 p-4 ",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{value:L,onChange:function(e){return U(e.target.value)},placeholder:"Type your message...",className:"flex-grow p-2 rounded-lg border border-gray-300 focus:outline-none"}),(0,l.jsx)("button",{disabled:!L,onClick:D,className:"ml-2 p-2 rounded-full bg-red-400 text-white hover:bg-red-600 focus:outline-none",children:(0,l.jsx)(g,{className:"h-6"})})]})})]}),(0,l.jsx)(N.Z,{})]})}},9008:function(e,t,r){e.exports=r(2636)}},function(e){e.O(0,[885,439,774,888,179],function(){return e(e.s=419)}),_N_E=e.O()}]);